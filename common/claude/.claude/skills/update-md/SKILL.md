---
name: update-md
description: 現在のセッションで行った変更に関連するmdファイルを更新または作成します。更新不要な場合は理由を説明して終了します。
user-invocable: true
---

# Update-MD - ドキュメント更新

**現在のClaudeセッション内で行った変更のみ**を対象に、関連するMarkdownドキュメントを更新または作成します。

## 重要: 対象範囲

このスキルは**現在の会話で自分（Claude）が行った変更のみ**を対象とします。
- git diff ではなく、会話履歴から変更内容を把握する
- 会話開始前から存在していた未コミットの変更は対象外
- 他のセッションや手動で行われた変更は対象外

## 手順

1. **セッション内の変更を振り返る** - 会話履歴から以下を特定:
   - Edit/Write ツールで変更・作成したファイル
   - 変更の目的と内容（機能追加、バグ修正、設定変更など）
   - 新しく追加されたキーバインド、コマンド、設定項目

2. **関連ドキュメントの特定** - 変更内容から関連するドキュメントを判断:
   - `docs/neovim.md` - Neovim設定の変更
   - `docs/tmux.md` - tmux設定の変更
   - `docs/git-config.md` - Git設定の変更
   - `docs/zsh-startup-optimization.md` - Zsh設定の変更
   - `docs/modern-cli-tools.md` - CLI ツールの追加・変更
   - `docs/1password-integration.md` - 1Password連携の変更
   - `docs/starship.md` - Starship設定の変更
   - `docs/sketchybar-aerospace.md` - SketchyBar/Aerospace設定の変更
   - `docs/database.md` - データベース関連の変更
   - `docs/claude-beacon.md` - Claude Code連携の変更
   - `docs/install.md` - インストール手順の変更
   - `docs/patches/*.md` - パッチ・ワークアラウンドの説明
   - `docs/troubleshooting/*.md` - トラブルシューティング情報

3. **更新判断** - 以下の基準で更新要否を判断:

   **更新すべき場合:**
   - 新しい機能・プラグインの追加
   - 既存機能の大幅な変更（設定値の変更、動作の変更）
   - 新しいキーバインドの追加
   - 新しいコマンド・ワークフローの追加
   - 依存関係の追加・削除
   - パッチ・ワークアラウンドの追加

   **更新不要な場合:**
   - バグ修正のみ（ドキュメントに影響しない）
   - 内部リファクタリング（外部動作に変更なし）
   - コメントの追加・修正のみ
   - 既にドキュメント化済みの機能の微調整
   - 一時的な設定変更
   - セッション内で変更を行っていない

4. **更新不要の場合** - 理由を明確に説明して終了:
   ```
   ドキュメント更新は不要です。

   理由: [具体的な理由]
   - 例: バグ修正のみで外部動作に変更がないため
   - 例: 既存機能の内部実装変更で、ユーザー向けの説明に影響がないため
   - 例: このセッションではドキュメント対象となる変更を行っていないため
   ```

5. **新規ドキュメント作成の判断** - 以下の場合に新規作成を検討:
   - 既存のどのドキュメントにも収まらない新しい領域の機能
   - 単独で説明が必要な大きな機能追加
   - 新しいトラブルシューティング情報
   - 新しいパッチ・ワークアラウンド

   既存ドキュメントの構成:
   - トップレベル: 機能・ツール単位のドキュメント
   - `patches/`: パッチ・ワークアラウンドの説明
   - `troubleshooting/`: 問題解決手順

6. **ドキュメント更新の実行**:
   - 既存のセクション構成・フォーマットに従う
   - 変更内容を適切なセクションに追加
   - 必要に応じて新しいセクションを追加
   - テーブル形式が使われている場合は同じ形式を維持

## 注意事項

- 過度に詳細な説明は避け、簡潔に記述
- 既存のドキュメントのトーンとスタイルを維持
- 変更がない場合は無理に更新しない
- コミットはこのスキルでは行わない（ユーザーが別途コミット）
