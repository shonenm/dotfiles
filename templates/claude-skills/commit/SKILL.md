---
name: commit
description: 現在の変更をgitコミットします。変更内容を確認し、適切なコミットメッセージを生成します。
user-invocable: true
---

# Commit - Git コミット作成

現在のgit変更を確認し、適切なコミットメッセージでコミットを作成します。

## 手順

1. **変更の確認** - 以下のコマンドを並列で実行して現在の状態を把握:
   - `git status` - 未追跡ファイルと変更の確認（`-uall`フラグは使用しない）
   - `git diff --staged` - ステージ済みの変更を確認
   - `git diff` - 未ステージの変更を確認
   - `git log --oneline -5` - 最近のコミットメッセージのスタイルを確認

2. **変更の分析** - すべての変更を分析し、適切なコミットメッセージを作成:
   - 変更の性質を要約（新機能、既存機能の強化、バグ修正、リファクタリング、テスト、ドキュメント等）
   - `add` = 新機能、`update` = 既存機能の強化、`fix` = バグ修正
   - `.env`や認証情報などの機密ファイルはコミットしない
   - 「何を」ではなく「なぜ」に焦点を当てた簡潔な（1-2文）メッセージを作成

3. **コミットの実行**:
   - 関連する未追跡ファイルをステージング（`git add -A`や`git add .`は避け、ファイル名を指定）
   - HEREDOCを使用してコミットメッセージを渡す:
     ```bash
     git commit -m "$(cat <<'EOF'
     コミットメッセージ

     Co-Authored-By: Claude <noreply@anthropic.com>
     EOF
     )"
     ```
   - コミット後に`git status`で成功を確認

## 注意事項

- ユーザーが明示的に要求しない限り、`--amend`は使用しない
- プリコミットフックが失敗した場合は、修正して新しいコミットを作成（amendしない）
- 変更がない場合は空コミットを作成しない
- `git push`はユーザーが明示的に要求しない限り実行しない
